pipeline {
    agent any
    
    stages {
        stage('Send Email') {
            steps {
                script {
                    def mailBody = """
                        Please review the changes and click the link below to approve or reject:
                        ${BUILD_URL}input
                    """
                    emailext body: mailBody,
                             subject: 'Code Review Request',
                             to: 'kthangaraju@yahoo.com',
                             replyTo: 'raju.thanga@gmail.com' // Your Gmail address
                }
            }
        }
        
        stage('Wait for Approval') {
            steps {
                input message: 'Please review the changes and approve or reject:', submitter: 'admin'
            }
        }
        
        stage('Proceed with Deployment') {
            steps {
                // Proceed with deployment
            }
        }
    }
}
