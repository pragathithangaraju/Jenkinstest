pipeline {
    agent any
    
    stages {
        stage('Send Email') {
            steps {
                script {
                    def mailBody = """
                        <html>
                        <body>
                            <p>Please review the changes and click the link below to approve or reject:</p>
                            <p><a href="${BUILD_URL}input">Review Changes</a></p>
                        </body>
                        </html>
                    """
                    emailext mimeType: 'text/html',
                             body: mailBody,
                             subject: 'Code Review Request',
                             to: 'kthangaraju@yahoo.com',
                             replyTo: 'jenkins@gmail.com' // Your Gmail address
                }
            }
        }
        
        stage('Wait for Approval') {
            steps {
                input message: 'Please review the changes and approve or reject:', submitter: 'admin'
            }
        }
        
        stage('Proceed with Deployment') {
            steps {
                echo "Hi"
            }
        }
    }
}
